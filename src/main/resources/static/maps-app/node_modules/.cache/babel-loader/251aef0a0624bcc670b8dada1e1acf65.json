{"ast":null,"code":"import'./App.css';import React,{useEffect,useRef}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";var curNorthWestLat;var curNorthWestLon;var curSouthEastLat;var curSouthEastLon;var pixToCoord;// global reference to the oldCanvas element\nvar canvas;// global reference to the oldCanvas' context\nvar ctx;//http://www.petecorey.com/blog/2019/08/19/animating-a-canvas-with-react-hooks/\nvar getPixelRatio=function getPixelRatio(context){var backingStore=context.backingStorePixelRatio||context.webkitBackingStorePixelRatio||context.mozBackingStorePixelRatio||context.msBackingStorePixelRatio||context.oBackingStorePixelRatio||context.backingStorePixelRatio||1;return(window.devicePixelRatio||1)/backingStore;};function Canvas(props){var w=600;var h=600;var ref=useRef();useEffect(function(){canvas=ref.current;ctx=canvas.getContext(\"2d\");var ratio=getPixelRatio(ctx);var width=getComputedStyle(canvas).getPropertyValue('width').slice(0,-2);var height=getComputedStyle(canvas).getPropertyValue('height').slice(0,-2);canvas.width=width*ratio;canvas.height=height*ratio;canvas.style.width=\"\".concat(width,\"px\");canvas.style.height=\"\".concat(height,\"px\");ctx.clearRect(0,0,canvas.width,canvas.height);ctx.lineWidth=1;pixToCoord=8000;curSouthEastLat=41.823876;curSouthEastLon=-71.395963;curNorthWestLat=curSouthEastLat-w/pixToCoord;curNorthWestLon=curSouthEastLon-h/pixToCoord;var rawWaysData=props.routetorender;var listOfWays=[];if(rawWaysData!=null){listOfWays=(rawWaysData+'').split(\";\");}var parsedWay;var type;var startLat;var startLon;var endLat;var endLon;console.log(\"low\"+listOfWays.length);for(var i=0;i<listOfWays.length;i++){parsedWay=listOfWays[i].split(\",\");type=parsedWay[0];startLat=parseFloat(parsedWay[1]);startLon=parseFloat(parsedWay[2]);endLat=parseFloat(parsedWay[3]);endLon=parseFloat(parsedWay[4]);if(i===500){console.log(h*(startLon-curNorthWestLon)/(curSouthEastLon-curNorthWestLon));}ctx.beginPath();ctx.moveTo(w*(startLat-curNorthWestLat)/(curSouthEastLat-curNorthWestLat)-300,h*(startLon-curNorthWestLon)/(curSouthEastLon-curNorthWestLon)-300);ctx.lineTo(w*(endLat-curNorthWestLat)/(curSouthEastLat-curNorthWestLat)-300,h*(endLon-curNorthWestLon)/(curSouthEastLon-curNorthWestLon)-300);ctx.strokeStyle=\"red\";if(type===\"\"||type===\"unclassified\"){ctx.strokeStyle=\"blue\";}ctx.stroke();}console.log(\"done\");});return/*#__PURE__*/_jsx(\"div\",{className:\"Canvas\",children:/*#__PURE__*/_jsx(\"canvas\",{ref:ref,style:{width:w,height:h},routetorender:props.routetorender,onChange:function onChange(e){return props.onChange(e.target.value);}})});}export default Canvas;","map":{"version":3,"sources":["/Users/suyashkothari/Desktop/cs32/maps-3-4-bgoff1-skothar7/src/main/resources/static/maps-app/src/Canvas.js"],"names":["React","useEffect","useRef","curNorthWestLat","curNorthWestLon","curSouthEastLat","curSouthEastLon","pixToCoord","canvas","ctx","getPixelRatio","context","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","window","devicePixelRatio","Canvas","props","w","h","ref","current","getContext","ratio","width","getComputedStyle","getPropertyValue","slice","height","style","clearRect","lineWidth","rawWaysData","routetorender","listOfWays","split","parsedWay","type","startLat","startLon","endLat","endLon","console","log","length","i","parseFloat","beginPath","moveTo","lineTo","strokeStyle","stroke","e","onChange","target","value"],"mappings":"AAAA,MAAO,WAAP,CACA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,MAA1B,KAAuC,OAAvC,C,2CAEA,GAAIC,CAAAA,eAAJ,CACA,GAAIC,CAAAA,eAAJ,CAEA,GAAIC,CAAAA,eAAJ,CACA,GAAIC,CAAAA,eAAJ,CAEA,GAAIC,CAAAA,UAAJ,CAEA;AACA,GAAIC,CAAAA,MAAJ,CAEA;AACA,GAAIC,CAAAA,GAAJ,CAEA;AACA,GAAMC,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAAAC,OAAO,CAAI,CAC7B,GAAIC,CAAAA,YAAY,CACZD,OAAO,CAACE,sBAAR,EACAF,OAAO,CAACG,4BADR,EAEAH,OAAO,CAACI,yBAFR,EAGAJ,OAAO,CAACK,wBAHR,EAIAL,OAAO,CAACM,uBAJR,EAKAN,OAAO,CAACE,sBALR,EAMA,CAPJ,CAQA,MAAO,CAACK,MAAM,CAACC,gBAAP,EAA2B,CAA5B,EAAiCP,YAAxC,CACH,CAVD,CAYA,QAASQ,CAAAA,MAAT,CAAgBC,KAAhB,CAAuB,CACnB,GAAIC,CAAAA,CAAC,CAAG,GAAR,CACA,GAAIC,CAAAA,CAAC,CAAG,GAAR,CACA,GAAIC,CAAAA,GAAG,CAAGtB,MAAM,EAAhB,CACAD,SAAS,CAAC,UAAM,CACZO,MAAM,CAAGgB,GAAG,CAACC,OAAb,CACAhB,GAAG,CAAGD,MAAM,CAACkB,UAAP,CAAkB,IAAlB,CAAN,CACA,GAAIC,CAAAA,KAAK,CAAGjB,aAAa,CAACD,GAAD,CAAzB,CACA,GAAImB,CAAAA,KAAK,CAAGC,gBAAgB,CAACrB,MAAD,CAAhB,CAAyBsB,gBAAzB,CAA0C,OAA1C,EAAmDC,KAAnD,CAAyD,CAAzD,CAA4D,CAAC,CAA7D,CAAZ,CACA,GAAIC,CAAAA,MAAM,CAAGH,gBAAgB,CAACrB,MAAD,CAAhB,CAAyBsB,gBAAzB,CAA0C,QAA1C,EAAoDC,KAApD,CAA0D,CAA1D,CAA6D,CAAC,CAA9D,CAAb,CACAvB,MAAM,CAACoB,KAAP,CAAeA,KAAK,CAAGD,KAAvB,CACAnB,MAAM,CAACwB,MAAP,CAAgBA,MAAM,CAAGL,KAAzB,CACAnB,MAAM,CAACyB,KAAP,CAAaL,KAAb,WAAwBA,KAAxB,OACApB,MAAM,CAACyB,KAAP,CAAaD,MAAb,WAAyBA,MAAzB,OACAvB,GAAG,CAACyB,SAAJ,CAAc,CAAd,CAAiB,CAAjB,CAAoB1B,MAAM,CAACoB,KAA3B,CAAkCpB,MAAM,CAACwB,MAAzC,EACAvB,GAAG,CAAC0B,SAAJ,CAAgB,CAAhB,CACA5B,UAAU,CAAG,IAAb,CAEAF,eAAe,CAAG,SAAlB,CACAC,eAAe,CAAG,CAAC,SAAnB,CAEAH,eAAe,CAAIE,eAAe,CAAGiB,CAAC,CAACf,UAAvC,CACAH,eAAe,CAAIE,eAAe,CAAGiB,CAAC,CAAChB,UAAvC,CAGA,GAAI6B,CAAAA,WAAW,CAAGf,KAAK,CAACgB,aAAxB,CACA,GAAIC,CAAAA,UAAU,CAAG,EAAjB,CACA,GAAIF,WAAW,EAAI,IAAnB,CAAyB,CACrBE,UAAU,CAAG,CAACF,WAAW,CAAG,EAAf,EAAmBG,KAAnB,CAAyB,GAAzB,CAAb,CACH,CAED,GAAIC,CAAAA,SAAJ,CACA,GAAIC,CAAAA,IAAJ,CACA,GAAIC,CAAAA,QAAJ,CACA,GAAIC,CAAAA,QAAJ,CACA,GAAIC,CAAAA,MAAJ,CACA,GAAIC,CAAAA,MAAJ,CACAC,OAAO,CAACC,GAAR,CAAY,MAAQT,UAAU,CAACU,MAA/B,EACA,IAAK,GAAIC,CAAAA,CAAC,CAAC,CAAX,CAAcA,CAAC,CAACX,UAAU,CAACU,MAA3B,CAAmCC,CAAC,EAApC,CAAwC,CACpCT,SAAS,CAAIF,UAAU,CAACW,CAAD,CAAV,CAAcV,KAAd,CAAoB,GAApB,CAAb,CACAE,IAAI,CAAGD,SAAS,CAAC,CAAD,CAAhB,CACAE,QAAQ,CAAGQ,UAAU,CAACV,SAAS,CAAC,CAAD,CAAV,CAArB,CACAG,QAAQ,CAAGO,UAAU,CAACV,SAAS,CAAC,CAAD,CAAV,CAArB,CACAI,MAAM,CAAGM,UAAU,CAACV,SAAS,CAAC,CAAD,CAAV,CAAnB,CACAK,MAAM,CAAGK,UAAU,CAACV,SAAS,CAAC,CAAD,CAAV,CAAnB,CACA,GAAIS,CAAC,GAAK,GAAV,CAAe,CACXH,OAAO,CAACC,GAAR,CAAYxB,CAAC,EAAEoB,QAAQ,CAAGvC,eAAb,CAAD,EAAgCE,eAAe,CAAGF,eAAlD,CAAZ,EACH,CACDK,GAAG,CAAC0C,SAAJ,GACA1C,GAAG,CAAC2C,MAAJ,CAAW9B,CAAC,EAAEoB,QAAQ,CAAGvC,eAAb,CAAD,EAAgCE,eAAe,CAAGF,eAAlD,EAAqE,GAAhF,CAAqFoB,CAAC,EAAEoB,QAAQ,CAAGvC,eAAb,CAAD,EAAgCE,eAAe,CAAGF,eAAlD,EAAqE,GAA1J,EACAK,GAAG,CAAC4C,MAAJ,CAAW/B,CAAC,EAAEsB,MAAM,CAAGzC,eAAX,CAAD,EAA8BE,eAAe,CAAGF,eAAhD,EAAmE,GAA9E,CAAmFoB,CAAC,EAAEsB,MAAM,CAAGzC,eAAX,CAAD,EAA8BE,eAAe,CAAGF,eAAhD,EAAmE,GAAtJ,EACAK,GAAG,CAAC6C,WAAJ,CAAkB,KAAlB,CACA,GAAIb,IAAI,GAAK,EAAT,EAAeA,IAAI,GAAK,cAA5B,CAA4C,CACxChC,GAAG,CAAC6C,WAAJ,CAAkB,MAAlB,CACH,CACD7C,GAAG,CAAC8C,MAAJ,GAEH,CACDT,OAAO,CAACC,GAAR,CAAY,MAAZ,EAEH,CAxDQ,CAAT,CAyDA,mBACI,YAAK,SAAS,CAAC,QAAf,uBACI,eACI,GAAG,CAAEvB,GADT,CAEI,KAAK,CAAE,CAAEI,KAAK,CAAEN,CAAT,CAAYU,MAAM,CAAET,CAApB,CAFX,CAGI,aAAa,CAAEF,KAAK,CAACgB,aAHzB,CAII,QAAQ,CAAE,kBAACmB,CAAD,QAAOnC,CAAAA,KAAK,CAACoC,QAAN,CAAeD,CAAC,CAACE,MAAF,CAASC,KAAxB,CAAP,EAJd,EADJ,EADJ,CAWH,CAED,cAAevC,CAAAA,MAAf","sourcesContent":["import './App.css';\nimport React, {useEffect, useRef} from \"react\";\n\nlet curNorthWestLat;\nlet curNorthWestLon;\n\nlet curSouthEastLat;\nlet curSouthEastLon;\n\nlet pixToCoord;\n\n// global reference to the oldCanvas element\nlet canvas;\n\n// global reference to the oldCanvas' context\nlet ctx;\n\n//http://www.petecorey.com/blog/2019/08/19/animating-a-canvas-with-react-hooks/\nconst getPixelRatio = context => {\n    let backingStore =\n        context.backingStorePixelRatio ||\n        context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio ||\n        1;\n    return (window.devicePixelRatio || 1) / backingStore;\n};\n\nfunction Canvas(props) {\n    let w = 600;\n    let h = 600;\n    let ref = useRef();\n    useEffect(() => {\n        canvas = ref.current;\n        ctx = canvas.getContext(\"2d\");\n        let ratio = getPixelRatio(ctx);\n        let width = getComputedStyle(canvas).getPropertyValue('width').slice(0, -2);\n        let height = getComputedStyle(canvas).getPropertyValue('height').slice(0, -2);\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        canvas.style.width = `${width}px`;\n        canvas.style.height = `${height}px`;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.lineWidth = 1\n        pixToCoord = 8000;\n\n        curSouthEastLat = 41.823876;\n        curSouthEastLon = -71.395963;\n\n        curNorthWestLat = (curSouthEastLat - w/pixToCoord);\n        curNorthWestLon = (curSouthEastLon - h/pixToCoord);\n\n\n        let rawWaysData = props.routetorender\n        let listOfWays = [];\n        if (rawWaysData != null) {\n            listOfWays = (rawWaysData + '').split(\";\");\n        }\n\n        let parsedWay;\n        let type;\n        let startLat;\n        let startLon;\n        let endLat;\n        let endLon;\n        console.log(\"low\" + listOfWays.length);\n        for (let i=0; i<listOfWays.length; i++) {\n            parsedWay =  listOfWays[i].split(\",\");\n            type = parsedWay[0]\n            startLat = parseFloat(parsedWay[1]);\n            startLon = parseFloat(parsedWay[2]);\n            endLat = parseFloat(parsedWay[3]);\n            endLon = parseFloat(parsedWay[4]);\n            if (i === 500) {\n                console.log(h*(startLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon))\n            }\n            ctx.beginPath();\n            ctx.moveTo(w*(startLat - curNorthWestLat)/(curSouthEastLat - curNorthWestLat) - 300, h*(startLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon) - 300);\n            ctx.lineTo(w*(endLat - curNorthWestLat)/(curSouthEastLat - curNorthWestLat) - 300, h*(endLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon) - 300);\n            ctx.strokeStyle = \"red\";\n            if (type === \"\" || type === \"unclassified\") {\n                ctx.strokeStyle = \"blue\";\n            }\n            ctx.stroke();\n\n        }\n        console.log(\"done\")\n\n    })\n    return (\n        <div className=\"Canvas\">\n            <canvas\n                ref={ref}\n                style={{ width: w, height: h }}\n                routetorender={props.routetorender}\n                onChange={(e) => props.onChange(e.target.value)}\n            />\n\n        </div>\n    );\n}\n\nexport default Canvas;"]},"metadata":{},"sourceType":"module"}