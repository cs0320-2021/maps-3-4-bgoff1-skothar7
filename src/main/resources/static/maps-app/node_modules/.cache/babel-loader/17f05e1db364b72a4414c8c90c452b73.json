{"ast":null,"code":"var _jsxFileName = \"/Users/suyashkothari/Desktop/cs32/maps-3-4-bgoff1-skothar7/src/main/resources/static/maps-app/src/Canvas.js\",\n    _s = $RefreshSig$();\n\nimport './App.css';\nimport React, { useEffect, useRef } from \"react\";\nimport { requestRoute } from \"./Route\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nlet curNorthWestLat;\nlet curNorthWestLon;\nlet curSouthEastLat;\nlet curSouthEastLon;\nlet pixToCoord; // global reference to the oldCanvas element\n\nlet canvas; // global reference to the oldCanvas' context\n\nlet ctx; //http://www.petecorey.com/blog/2019/08/19/animating-a-canvas-with-react-hooks/\n\nconst getPixelRatio = context => {\n  let backingStore = context.backingStorePixelRatio || context.webkitBackingStorePixelRatio || context.mozBackingStorePixelRatio || context.msBackingStorePixelRatio || context.oBackingStorePixelRatio || context.backingStorePixelRatio || 1;\n  return (window.devicePixelRatio || 1) / backingStore;\n};\n\nfunction Canvas(props) {\n  _s();\n\n  let w = 600;\n  let h = 600;\n  let ref = useRef();\n  const firstUpdate = useRef(true);\n  useEffect(() => {\n    if (firstUpdate.current) {\n      curSouthEastLat = 41.822895;\n      curSouthEastLon = -71.396608;\n      curNorthWestLat = 41.828693;\n      curNorthWestLon = -71.406524;\n      firstUpdate.current = false;\n      requestRoute();\n    } else {\n      curSouthEastLat = parseFloat(props.routetorender[3]);\n      curSouthEastLon = parseFloat(props.routetorender[4]);\n      curNorthWestLat = parseFloat(props.routetorender[1]);\n      curNorthWestLon = parseFloat(props.routetorender[2]);\n    }\n\n    canvas = ref.current;\n    ctx = canvas.getContext(\"2d\");\n    let ratio = getPixelRatio(ctx);\n    let width = getComputedStyle(canvas).getPropertyValue('width').slice(0, -2);\n    let height = getComputedStyle(canvas).getPropertyValue('height').slice(0, -2);\n    canvas.width = width * ratio;\n    canvas.height = height * ratio;\n    canvas.style.width = `${width}px`;\n    canvas.style.height = `${height}px`;\n    ctx.clearRect(0, 0, canvas.width, canvas.height);\n    ctx.lineWidth = 1;\n    pixToCoord = 50000; //default\n    // curSouthEastLat = 41.823876;\n    // curSouthEastLon = -71.395963;\n    //\n    // curNorthWestLat = (curSouthEastLat - w/pixToCoord);\n    // curNorthWestLon = (curSouthEastLon - h/pixToCoord);\n    //with ways\n\n    console.log(curSouthEastLat);\n    console.log(curSouthEastLon);\n    console.log(curNorthWestLat);\n    console.log(curNorthWestLon);\n    let rawWaysData = props.routetorender[0];\n    let listOfWays = [];\n\n    if (rawWaysData != null) {\n      listOfWays = (rawWaysData + '').split(\";\");\n    }\n\n    let parsedWay;\n    let type;\n    let startLat;\n    let startLon;\n    let endLat;\n    let endLon;\n    pixToCoord = (curNorthWestLon - curSouthEastLon) / w;\n    h = (curNorthWestLat - curSouthEastLat) / pixToCoord;\n    console.log(\"low\" + listOfWays.length);\n\n    for (let i = 0; i < listOfWays.length; i++) {\n      parsedWay = listOfWays[i].split(\",\");\n      type = parsedWay[0];\n      startLat = parseFloat(parsedWay[1]);\n      startLon = parseFloat(parsedWay[2]);\n      endLat = parseFloat(parsedWay[3]);\n      endLon = parseFloat(parsedWay[4]);\n\n      if (i === 500) {\n        console.log(w * (startLon - curNorthWestLon) / (curSouthEastLon - curNorthWestLon));\n      }\n\n      ctx.beginPath();\n      ctx.moveTo(w * (startLon - curNorthWestLon) / (curSouthEastLon - curNorthWestLon), 0 - h * (startLat - curNorthWestLat) / (curSouthEastLat - curNorthWestLat));\n      ctx.lineTo(w * (endLon - curNorthWestLon) / (curSouthEastLon - curNorthWestLon), 0 - h * (endLat - curNorthWestLat) / (curSouthEastLat - curNorthWestLat)); //ctx.moveTo(w*(startLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon), h-h*(startLat - curNorthWestLat)/(curSouthEastLat - curNorthWestLat));\n      //ctx.lineTo(w*(endLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon), h-h*(endLat - curNorthWestLat)/(curSouthEastLat - curNorthWestLat));\n\n      ctx.strokeStyle = \"red\";\n\n      if (type === \"\" || type === \"unclassified\") {\n        ctx.strokeStyle = \"blue\";\n      }\n\n      ctx.stroke();\n    }\n\n    console.log(\"done\");\n  });\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"Canvas\",\n    children: /*#__PURE__*/_jsxDEV(\"canvas\", {\n      ref: ref,\n      style: {\n        width: w,\n        height: h\n      },\n      routetorender: props.routetorender,\n      onChange: e => props.onChange(e.target.value),\n      onMouseDown: e => props.onMouseDown([e.pageX, e.pageY]),\n      onMouseUp: e => props.onMouseUp([e.pageX, e.pageY])\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 122,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Canvas, \"09i5QqiURSVJSpQplbFeEF1r1KY=\");\n\n_c = Canvas;\nexport default Canvas;\n\nvar _c;\n\n$RefreshReg$(_c, \"Canvas\");","map":{"version":3,"sources":["/Users/suyashkothari/Desktop/cs32/maps-3-4-bgoff1-skothar7/src/main/resources/static/maps-app/src/Canvas.js"],"names":["React","useEffect","useRef","requestRoute","curNorthWestLat","curNorthWestLon","curSouthEastLat","curSouthEastLon","pixToCoord","canvas","ctx","getPixelRatio","context","backingStore","backingStorePixelRatio","webkitBackingStorePixelRatio","mozBackingStorePixelRatio","msBackingStorePixelRatio","oBackingStorePixelRatio","window","devicePixelRatio","Canvas","props","w","h","ref","firstUpdate","current","parseFloat","routetorender","getContext","ratio","width","getComputedStyle","getPropertyValue","slice","height","style","clearRect","lineWidth","console","log","rawWaysData","listOfWays","split","parsedWay","type","startLat","startLon","endLat","endLon","length","i","beginPath","moveTo","lineTo","strokeStyle","stroke","e","onChange","target","value","onMouseDown","pageX","pageY","onMouseUp"],"mappings":"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","sourcesContent":["import './App.css';\nimport React, {useEffect, useRef} from \"react\";\nimport {requestRoute} from \"./Route\"\n\nlet curNorthWestLat;\nlet curNorthWestLon;\n\nlet curSouthEastLat;\nlet curSouthEastLon;\n\nlet pixToCoord;\n\n// global reference to the oldCanvas element\nlet canvas;\n\n// global reference to the oldCanvas' context\nlet ctx;\n\n//http://www.petecorey.com/blog/2019/08/19/animating-a-canvas-with-react-hooks/\nconst getPixelRatio = context => {\n    let backingStore =\n        context.backingStorePixelRatio ||\n        context.webkitBackingStorePixelRatio ||\n        context.mozBackingStorePixelRatio ||\n        context.msBackingStorePixelRatio ||\n        context.oBackingStorePixelRatio ||\n        context.backingStorePixelRatio ||\n        1;\n    return (window.devicePixelRatio || 1) / backingStore;\n};\n\nfunction Canvas(props) {\n    let w = 600;\n    let h = 600;\n    let ref = useRef();\n    const firstUpdate = useRef(true);\n    useEffect(() => {\n        if (firstUpdate.current) {\n            curSouthEastLat = 41.822895\n            curSouthEastLon = -71.396608\n            curNorthWestLat = 41.828693\n            curNorthWestLon = -71.406524\n            firstUpdate.current = false\n            requestRoute()\n        } else {\n            curSouthEastLat = parseFloat(props.routetorender[3]);\n            curSouthEastLon = parseFloat(props.routetorender[4]);\n            curNorthWestLat = parseFloat(props.routetorender[1]);\n            curNorthWestLon = parseFloat(props.routetorender[2]);\n        }\n        canvas = ref.current;\n        ctx = canvas.getContext(\"2d\");\n        let ratio = getPixelRatio(ctx);\n        let width = getComputedStyle(canvas).getPropertyValue('width').slice(0, -2);\n        let height = getComputedStyle(canvas).getPropertyValue('height').slice(0, -2);\n        canvas.width = width * ratio;\n        canvas.height = height * ratio;\n        canvas.style.width = `${width}px`;\n        canvas.style.height = `${height}px`;\n        ctx.clearRect(0, 0, canvas.width, canvas.height);\n        ctx.lineWidth = 1\n        pixToCoord = 50000;\n\n        //default\n        // curSouthEastLat = 41.823876;\n        // curSouthEastLon = -71.395963;\n        //\n        // curNorthWestLat = (curSouthEastLat - w/pixToCoord);\n        // curNorthWestLon = (curSouthEastLon - h/pixToCoord);\n\n        //with ways\n\n        console.log(curSouthEastLat);\n        console.log(curSouthEastLon);\n        console.log(curNorthWestLat);\n        console.log(curNorthWestLon);\n\n\n        let rawWaysData = props.routetorender[0]\n        let listOfWays = [];\n        if (rawWaysData != null) {\n            listOfWays = (rawWaysData + '').split(\";\");\n        }\n\n        let parsedWay;\n        let type;\n        let startLat;\n        let startLon;\n        let endLat;\n        let endLon;\n\n        pixToCoord = ((curNorthWestLon - curSouthEastLon)/w);\n        h = (curNorthWestLat - curSouthEastLat)/pixToCoord;\n\n        console.log(\"low\" + listOfWays.length);\n        for (let i=0; i<listOfWays.length; i++) {\n            parsedWay =  listOfWays[i].split(\",\");\n            type = parsedWay[0]\n            startLat = parseFloat(parsedWay[1]);\n            startLon = parseFloat(parsedWay[2]);\n            endLat = parseFloat(parsedWay[3]);\n            endLon = parseFloat(parsedWay[4]);\n            if (i === 500) {\n                console.log(w*(startLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon));\n            }\n            ctx.beginPath();\n            ctx.moveTo(w*(startLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon), 0 - h*(startLat - curNorthWestLat)/(curSouthEastLat - curNorthWestLat));\n            ctx.lineTo(w*(endLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon), 0 - h*(endLat - curNorthWestLat)/(curSouthEastLat - curNorthWestLat));\n             //ctx.moveTo(w*(startLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon), h-h*(startLat - curNorthWestLat)/(curSouthEastLat - curNorthWestLat));\n             //ctx.lineTo(w*(endLon - curNorthWestLon)/(curSouthEastLon - curNorthWestLon), h-h*(endLat - curNorthWestLat)/(curSouthEastLat - curNorthWestLat));\n            ctx.strokeStyle = \"red\";\n            if (type === \"\" || type === \"unclassified\") {\n                ctx.strokeStyle = \"blue\";\n            }\n            ctx.stroke();\n\n        }\n        console.log(\"done\")\n\n    })\n    return (\n        <div className=\"Canvas\">\n            <canvas\n                ref={ref}\n                style={{ width: w, height: h }}\n                routetorender={props.routetorender}\n                onChange={(e) => props.onChange(e.target.value)}\n                onMouseDown={(e) => props.onMouseDown([e.pageX, e.pageY])}\n                onMouseUp={(e) => props.onMouseUp([e.pageX, e.pageY])}\n            />\n\n        </div>\n    );\n}\n\nexport default Canvas;"]},"metadata":{},"sourceType":"module"}